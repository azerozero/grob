# ═══════════════════════════════════════════════════════════
# Grob Preset: FAST (Premium)
# ═══════════════════════════════════════════════════════════
# Meilleurs modeles partout, zero compromis.
# Maximum de puissance de raisonnement + fallbacks rapides.
#
# Leaderboard scores (Chatbot Arena, Feb 2026):
#   claude-opus-4-6-thinking  1553  (Rank #2, best reasoning)
#   claude-opus-4-6           1560  (Rank #1, best overall)
#   claude-sonnet-4-6         1533  (Rank #3, fast + capable)
#   gpt-5.2-high              1471  (Rank #5, strong alternative)
#   gemini-3-pro              1444  (Rank #9, 1M context)
#
# ── Cout estime (8h/jour, 22j/mois) ──────────────────────
#
#   Ce preset (API directes Anthropic + OpenAI + Gemini):
#     Sans agent : ~€300-500/mois
#     Avec agent : ~€3000-5000/mois
#
#   Via OpenRouter (credit initial €20):
#     Sans agent : ~€350-550/mois  (markup ~10-15%)
#     Avec agent : ~€3500-5500/mois
#
#   Comparaison OpenAI seul (GPT-4o $2.50/$10 par M tokens):
#     Sans agent : ~€90/mois
#     Avec agent : ~€900/mois
#
#   Alternative locale (Ollama, qualite inferieure):
#     Mac Mini M4 Pro 48GB  : €1800 → €52/mois sur 3 ans + elec
#     Mac Studio M4 Max 128GB: €5000 → €144/mois sur 3 ans + elec
#     Electricite (FR €0.25/kWh): €2-5/mois
#     Apres amortissement : €2-5/mois (elec seule)
#     Limitation : modeles locaux 32B ≈ GPT-4o, pas Opus
#
# ═══════════════════════════════════════════════════════════

# ── Providers ────────────────────────────────────────────

# Anthropic Native — lowest latency for Claude models
[[providers]]
name = "anthropic"
provider_type = "anthropic"
api_key = "$ANTHROPIC_API_KEY"
enabled = true
models = []

# OpenAI — for GPT-5.2 and codex models
[[providers]]
name = "openai"
provider_type = "openai"
api_key = "$OPENAI_API_KEY"
enabled = true
models = []

# Google Gemini — 1M context window, multimodal
[[providers]]
name = "gemini"
provider_type = "gemini"
api_key = "$GEMINI_API_KEY"
enabled = true
models = []

# OpenRouter — universal fallback for any model
[[providers]]
name = "openrouter"
provider_type = "openrouter"
api_key = "$OPENROUTER_API_KEY"
enabled = true
models = []

# ── Models ───────────────────────────────────────────────

# Default: Claude Opus 4.6 (Rank #1, score 1560)
[[models]]
name = "default-model"

  [[models.mappings]]
  priority = 1
  provider = "anthropic"
  actual_model = "claude-opus-4-6"

  [[models.mappings]]
  priority = 2
  provider = "openrouter"
  actual_model = "anthropic/claude-opus-4-6"

# Thinking: Claude Opus 4.6 Thinking (Rank #2, score 1553)
# Extended thinking with 32k budget for deep reasoning
[[models]]
name = "think-model"

  [[models.mappings]]
  priority = 1
  provider = "anthropic"
  actual_model = "claude-opus-4-6"

  [[models.mappings]]
  priority = 2
  provider = "openrouter"
  actual_model = "anthropic/claude-opus-4-6"

# Background: Claude Sonnet 4.6 (Rank #3, score 1533, fast)
[[models]]
name = "background-model"

  [[models.mappings]]
  priority = 1
  provider = "anthropic"
  actual_model = "claude-sonnet-4-6"

  [[models.mappings]]
  priority = 2
  provider = "openai"
  actual_model = "gpt-5.2"

  [[models.mappings]]
  priority = 3
  provider = "openrouter"
  actual_model = "anthropic/claude-sonnet-4-6"

# Web search: Claude Sonnet 4.6 (fast, tool-use capable)
[[models]]
name = "search-model"

  [[models.mappings]]
  priority = 1
  provider = "anthropic"
  actual_model = "claude-sonnet-4-6"

  [[models.mappings]]
  priority = 2
  provider = "gemini"
  actual_model = "gemini-3-pro"

# Heavy reasoning: GPT-5.2 High (Rank #5, score 1471)
# Used as alternative when Anthropic is down
[[models]]
name = "gpt-5.2-high"

  [[models.mappings]]
  priority = 1
  provider = "openai"
  actual_model = "gpt-5.2-high"

  [[models.mappings]]
  priority = 2
  provider = "openrouter"
  actual_model = "openai/gpt-5.2-high"

# Gemini Pro: 1M context for massive codebases
[[models]]
name = "gemini-3-pro"

  [[models.mappings]]
  priority = 1
  provider = "gemini"
  actual_model = "gemini-3-pro"

  [[models.mappings]]
  priority = 2
  provider = "openrouter"
  actual_model = "google/gemini-3-pro"

# ── Router ───────────────────────────────────────────────

[router]
default = "default-model"
think = "think-model"
background = "background-model"
websearch = "search-model"

# Route architecture/design tasks to thinking model
[[router.prompt_rules]]
pattern = "(?i)(architect|design.*system|plan.*implement|security.*review)"
model = "think-model"

# Route quick tasks to fast Sonnet
[[router.prompt_rules]]
pattern = "(?i)(format|lint|rename|typo|commit|push)"
model = "background-model"
